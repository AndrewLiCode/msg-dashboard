(this["webpackJsonpdashboard-app"]=this["webpackJsonpdashboard-app"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n(0),i=n.n(a),l=n(11),c=n.n(l),r=(n(98),n(158)),o=n(151),u=n(73),d=n.n(u),j=n(13);var b=n(71),h=n(80),g=n(16);function reducer(e,t){switch(t.type){case"add-new-message":return Object(g.a)(Object(g.a)({},e),{},{allMessages:[].concat(Object(h.a)(e.allMessages),[t.payload])});case"delete-all":return Object(g.a)(Object(g.a)({},e),{},{messages:[]});case"delete-one":var n=e.allMessages.filter((function(e){return e.id!==t.payload}));return Object(g.a)(Object(g.a)({},e),{},{messages:n});case"is-running":return Object(g.a)(Object(g.a)({},e),{},{isRunning:t.payload});case"set-snackbar":return Object(g.a)(Object(g.a)({},e),{},{snackbar:t.payload});case"set-select":return Object(g.a)(Object(g.a)({},e),{},{select:t.payload});default:return}}var O=Object(a.createContext)();function useDashboard(){return Object(a.useContext)(O)}var m={allMessages:[],msgsInView:[],isRunning:!1,snackbar:"",select:"view all"};function DashboardProvider(e){var t=e.children,n=Object(a.useReducer)(reducer,m),i=Object(j.a)(n,2),l=i[0],c=i[1];"view all"!==l.select&&(l.msgsInView=l.allMessages.filter((function(e){return e.level===l.select}))),"view all"===l.select&&(l.msgsInView=l.allMessages),function useInterval(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function tick(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){var e=Object(b.randomGenerator)();c({type:"add-new-message",payload:e})}),l.isRunning?2e3:null);var r={state:l,dispatch:c};return Object(s.jsx)(O.Provider,{value:r,children:t})}function SimpleSnackbar(){var e=useDashboard(),t=e.state,n=e.dispatch;function handleClose(e,t){"clickaway"!==t&&n({type:"set-snackbar",payload:""})}return Object(s.jsx)(s.Fragment,{children:t.snackbar&&Object(s.jsx)(r.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:Boolean(t.snackbar),autoHideDuration:4e3,onClose:handleClose,message:t.snackbar,severity:"success",action:Object(s.jsx)(o.a,{size:"small","aria-label":"close",color:"inherit",onClick:handleClose,children:Object(s.jsx)(d.a,{fontSize:"small"})})})})}var p=n(74),v=n.n(p),x=n(56),f=n(57),y=n(55),w=x.a[300],M=f.a[700],_=y.a[400];var C={backgroundColor:"gainsboro",width:"100px",marginRight:"1rem"};function getChipBackground(e){return"warn"===e?w:"status"===e?M:"error"===e?_:void 0}function getChipColor(e){return"warn"===e?"black":"status"===e||"error"===e?"white":void 0}function getAvatar(e){return e.charAt(0).toUpperCase()}function getReadableTime(e){return v()(e).format("llll")}var k=n(43),S=n.n(k),I=n(153),R=n(65),D=n(58),N=n.n(D);var P=function PlayPauseIcons(e){var t=e.toggleIsRunning,n=useDashboard().state;return Object(s.jsx)("div",{className:N.a.icon,children:n.isRunning?Object(s.jsx)(R.b,{className:N.a.playIcon,onClick:function onClick(){return t()}}):Object(s.jsx)(R.a,{className:N.a.pauseIcon,onClick:function onClick(){return t()}})})},A=n(32),E=n.n(A),V=n(159),B=n(160),F=n(152),T=n(155),W=n(50),L=n(75),U=n.n(L);var G=function SelectMenu(e){var t,n,a=e.inEditView,i=e.level,l=e.setLevel,c=useDashboard(),r=c.dispatch,o=c.state;return a&&(t=W.levels,n=i),a||(t=W.levelsAll,n=o.select),Object(s.jsxs)(F.a,{variant:"outlined",children:[Object(s.jsx)(V.a,{id:"demo-simple-select-outlined-label",classes:{underline:U.a.underline},children:"Levels"}),Object(s.jsx)(T.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",style:C,value:n,onChange:function handleChange(e){var t=e.target.value;a?l(t):(r({type:"set-snackbar",payload:"Successfully changed level to ".concat(t)}),r({type:"set-select",payload:t}))},label:"Levels",children:t.map((function(e,t){return Object(s.jsx)(B.a,{value:e,children:e},t)}))})]})},H=n(63),z=n.n(H);var q=function Dialogue(e){var t=e.id,n=e.inMenu,i=e.setShowDelete,l=useDashboard(),c=l.state,r=l.dispatch,o=Object(a.useState)(""),u=Object(j.a)(o,2),d=u[0],b=u[1];function deleteSelected(){n&&function deleteAllAndSetSnackbar(){i(!1),r({type:"delete-all"}),r({type:"set-snackbar",payload:"Successfully deleted all"})}(),n||function deleteOneAndSetSnackbar(){i(!1),r({type:"delete-one",payload:t}),r({type:"set-snackbar",payload:"Successfully deleted message"}),r({type:"is-running",payload:!c.isRunning})}()}return Object(a.useEffect)((function(){n&&b("Are you sure you want to delete all? This cannot be undone."),n||b("Are you sure you want to delete this message?")}),[n]),Object(s.jsxs)("div",{className:n?z.a.inMenu:z.a.main,children:[Object(s.jsx)("h5",{id:"confirmation-dialog-title",children:d}),Object(s.jsxs)("div",{children:[Object(s.jsx)(I.a,{autoFocus:!0,onClick:function onClick(){return function closeDialogue(){n&&i(!1),n||(i(!1),r({type:"is-running",payload:!c.isRunning}))}()},variant:"contained",style:{marginRight:"1rem"},children:"Cancel"}),Object(s.jsx)(I.a,{onClick:function onClick(){return deleteSelected()},color:"primary",variant:"contained",style:{background:"#AA647B"},children:"Delete"})]})]})},J=n(76),X=n(64),Y=n.n(X);var Z=function Chart(e){var t=e.mini,n=useDashboard().state,a=n.allMessages.filter((function(e){return"warn"===e.level})),i=n.allMessages.filter((function(e){return"error"===e.level})),l=n.allMessages.filter((function(e){return"status"===e.level})),c=a.length/n.allMessages.length||0,r=i.length/n.allMessages.length||0,o=l.length/n.allMessages.length||0;return Object(s.jsx)(J.PieChart,{className:t?Y.a.small:Y.a.big,data:[{title:"warn",value:c,color:w},{title:"error",value:r,color:_},{title:"status",value:o,color:M}]})};var K=function FullMenu(e){var t=e.plural,n=e.toggleIsRunning,i=useDashboard(),l=i.state,c=(i.msgsInView,Object(a.useState)(!1)),r=Object(j.a)(c,2),o=r[0],u=r[1];return Object(s.jsxs)("div",{className:S.a.main,children:[Object(s.jsxs)("div",{className:S.a.left,children:[o&&Object(s.jsx)(q,{inMenu:!0,setShowDelete:u}),Object(s.jsxs)("div",{className:S.a.status,children:[Object(s.jsxs)("h2",{children:["Status: ",l.isRunning?"Running":"Paused"]}),Object(s.jsx)(P,{toggleIsRunning:n})]}),Object(s.jsx)(I.a,{onClick:function onClick(e){return u(!0)},variant:"contained",startIcon:Object(s.jsx)(E.a,{}),style:{marginRight:"1rem"},color:"secondary",children:"Delete all"}),Object(s.jsx)(I.a,{onClick:function onClick(e){return n()},variant:"contained",children:l.isRunning?"Pause":"Start"}),Object(s.jsx)("br",{}),Object(s.jsx)("p",{children:"Filter:"}),Object(s.jsx)(G,{})]}),Object(s.jsxs)("div",{className:S.a.right,children:[Object(s.jsx)(Z,{mini:!1}),Object(s.jsxs)("p",{children:["Displaying ",l.msgsInView.length," ","view all"!==l.select&&"of ".concat(l.allMessages.length," total")," ",t]})]})]})},Q=n(44),$=n.n(Q);var ee=function MiniMenu(e){var t=e.plural,n=e.toggleIsRunning,i=useDashboard(),l=i.state,c=(i.msgsInView,Object(a.useState)(!1)),r=Object(j.a)(c,2),o=r[0],u=r[1],d="1px solid ".concat(w),b="1px solid ".concat(M),h={borderBottom:l.isRunning?b:d};return Object(s.jsxs)("div",{className:$.a.main,style:h,children:[Object(s.jsxs)("div",{className:$.a.left,children:[o&&Object(s.jsx)(q,{inMenu:!0,setShowDelete:u}),Object(s.jsx)("div",{className:$.a.status,children:Object(s.jsx)("h2",{children:"\ud83d\udcac"})}),Object(s.jsx)("p",{children:"Filter:"}),Object(s.jsx)(G,{}),Object(s.jsx)(I.a,{onClick:function onClick(e){return u(!0)},variant:"contained",style:{background:"#AA647B",height:"40px",paddingLeft:"1rem"},children:Object(s.jsx)(E.a,{})})]}),Object(s.jsxs)("div",{className:$.a.right,children:[Object(s.jsx)(P,{toggleIsRunning:n}),Object(s.jsxs)("p",{children:[l.msgsInView.length," ","view all"!==l.select&&"of ".concat(l.allMessages.length)," ",t]}),Object(s.jsx)(Z,{mini:!0})]})]})},te=n(77),ne=n.n(te),se=n(154),ae=Object(se.a)({buttonStyle:{position:"fixed",right:"1rem",bottom:"1rem"}});function ToTop(){var e=ae();return Object(s.jsx)(I.a,{variant:"contained",color:"default",className:e.buttonStyle,href:"#top",children:"To top"})}var ie=function Header(){var e,t=useDashboard(),n=t.state,i=t.dispatch,l=Object(a.useState)("messages"),c=Object(j.a)(l,2),r=c[0],o=c[1],u=Object(a.useState)(0),d=Object(j.a)(u,2),b=d[0],h=d[1];function toggleIsRunning(){var e=n.isRunning?"Paused":"Started";i({type:"is-running",payload:!n.isRunning}),i({type:"set-snackbar",payload:e})}return n.msgsInView.length>3&&(e=document.getElementById("messages").clientHeight),Object(a.useEffect)((function(){o(function getPlural(e){return 1===e.length?"message":1!==e.length?"messages":void 0}(n)),e>490&&(window.onscroll=function(){h(window.pageYOffset)})}),[n,e]),Object(s.jsx)("div",{children:b<1||n.msgsInView.length<=3?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:ne.a.main,children:Object(s.jsx)("h1",{children:"Messages Dashboard \ud83d\udcac"})}),Object(s.jsx)(K,{toggleIsRunning:toggleIsRunning,plural:r,id:"top"})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ee,{toggleIsRunning:toggleIsRunning,plural:r}),Object(s.jsx)(ToTop,{})]})})},le=n(78),ce=n.n(le),re=n(54),oe=n.n(re),ue=n(161),de=n(162);var je=function MessageButtons(e){var t=e.id,n=e.showDelete,i=e.setShowDelete,l=e.editOrView,c=e.setEditOrView,r=e.editMode,o=e.setNewMsg,u=useDashboard(),d=u.state,j=u.dispatch,b=Object(a.useCallback)((function(){j({type:"is-running",payload:!d.isRunning}),c(!l)}),[j,c,d.isRunning,l]);return Object(s.jsxs)("div",{className:oe.a.buttons,children:[n&&Object(s.jsx)(q,{showDelete:n,setShowDelete:i,id:t}),Object(s.jsx)(I.a,{onClick:function onClick(){return function firstButtonClicked(){r||(j({type:"is-running",payload:!d.isRunning}),i(!0)),r&&(o(),c(!l),j({type:"set-snackbar",payload:"Successfully edited message"}),j({type:"is-running",payload:!d.isRunning}))}()},variant:"contained",color:r?"primary":"secondary",startIcon:!r&&Object(s.jsx)(E.a,{}),style:{marginRight:"1rem"},children:r?"Accept":"Delete"}),Object(s.jsx)("button",{onClick:function onClick(){return b()},children:r?"Cancel":"Edit"})]})},be=Object(se.a)({chipStyle:function chipStyle(e){return{backgroundColor:getChipBackground(e.level),color:getChipColor(e.level)}}});var he=function Message(e){var t=e.msg,n=e.text,i=e.setEditOrView,l=e.editOrView,c=Object(a.useState)(!1),r=Object(j.a)(c,2),o=r[0],u=r[1],d=be(t);return Object(s.jsxs)("div",{className:oe.a.message,id:t.id,children:[Object(s.jsx)("p",{children:getReadableTime(t.timestamp)}),Object(s.jsx)(ue.a,{className:d.chipStyle,label:t.level,avatar:Object(s.jsx)(de.a,{children:getAvatar(t.level)})}),Object(s.jsx)("h4",{children:n}),Object(s.jsx)(je,{id:t.id,showDelete:o,setShowDelete:u,setEditOrView:i,editOrView:l})]})},ge=n(79),Oe=n.n(ge),me=n(5);var pe=function EditMessage(e){var t=e.msg,n=e.editOrView,i=e.setEditOrView,l=e.setNewText,c=e.level,r=e.setLevel,o=useDashboard().dispatch,u=Object(a.useState)(t.message),d=Object(j.a)(u,2),b=d[0],h=d[1],g=Object(me.a)(function customChip(e){return{root:{backgroundColor:getChipBackground(e),color:getChipColor(e)}}}(c))(ue.a);function setNewMsg(){l(b),o({type:"is-running",payload:!0})}return Object(s.jsxs)("form",{className:Oe.a.editMessage,id:t.id,onSubmit:setNewMsg,children:[Object(s.jsx)("h3",{children:"Edit details:"}),Object(s.jsxs)("p",{children:["Created: ",getReadableTime(t.timestamp)]}),Object(s.jsx)(g,{label:c,avatar:Object(s.jsx)(de.a,{children:getAvatar(c)})}),Object(s.jsx)("br",{}),Object(s.jsx)("h4",{children:"Edit level:"}),Object(s.jsx)(G,{inEditView:!0,id:t.id,level:c,setLevel:r}),Object(s.jsx)("br",{}),Object(s.jsx)("h4",{children:"Edit message:"}),Object(s.jsx)("br",{}),Object(s.jsx)("textarea",{name:"",id:"",cols:"100",rows:"3",defaultValue:b,onChange:function onChange(e){return h(e.target.value)}}),Object(s.jsx)(je,{id:t.id,editMode:!0,setNewMsg:setNewMsg,editOrView:n,setEditOrView:i})]})};function MessageCard(e){var t=e.msg,n=Object(a.useState)(t.edit),i=Object(j.a)(n,2),l=i[0],c=i[1],r=Object(a.useState)(t.message),o=Object(j.a)(r,2),u=o[0],d=o[1],b=Object(a.useState)(t.level),h=Object(j.a)(b,2),g=h[0],O=h[1];return Object(s.jsx)("div",{children:l?Object(s.jsx)(pe,{msg:t,editOrView:l,setEditOrView:c,setNewText:d,setLevel:O,level:g}):Object(s.jsx)(he,{msg:t,text:u,setEditOrView:c,editOrView:l})})}var ve=function Messages(){var e=useDashboard().state;return Object(s.jsx)("div",{className:ce.a.main,id:"messages",children:e.msgsInView.map((function(e,t){return Object(s.jsx)("div",{children:Object(s.jsx)(MessageCard,{msg:e})},t)}))})},xe=n(156),fe=Object(se.a)((function(e){return{paper:{position:"absolute",backgroundColor:"#333333",borderRadius:".5rem",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"4rem",maxWidth:"600px"}}}));function SimpleModal(){var e=useDashboard(),t=e.dispatch,n=e.state,a=fe(),l=i.a.useState(!0),c=Object(j.a)(l,2),r=c[0],o=c[1],u=function handleClose(){o(!1),t({type:"is-running",payload:!n.isRunning})};return Object(s.jsx)(xe.a,{open:r,onClose:function onClose(){return u()},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",style:{display:"flex",justifyContent:"center"},children:Object(s.jsxs)("div",{className:a.paper,children:[Object(s.jsx)("h2",{id:"simple-modal-title",children:"This project displays messages generated every two seconds by a server."}),Object(s.jsx)("h5",{id:"simh5le-modal-description",children:"Project goals:"}),Object(s.jsxs)("ol",{children:[Object(s.jsx)("li",{children:"Display the messages"}),Object(s.jsxs)("li",{children:["Filter messages by ",Object(s.jsx)("code",{children:"level"})]}),Object(s.jsx)("li",{children:"Start/stop messages from the server"}),Object(s.jsx)("li",{children:"Delete all messages "}),Object(s.jsx)("li",{children:"Delete individual messages"}),Object(s.jsx)("li",{children:"Edit messages"}),Object(s.jsx)("li",{children:"Use pretty colors \ud83c\udf08"})]}),Object(s.jsx)("h3",{children:"Closing this modal will start the server."}),Object(s.jsx)(I.a,{autoFocus:!0,variant:"contained",onClick:function onClick(){return u()},children:"Close"})]})})}var ye=function App(){return Object(s.jsxs)(DashboardProvider,{children:[Object(s.jsx)(SimpleModal,{}),Object(s.jsx)(SimpleSnackbar,{}),Object(s.jsx)(ie,{}),Object(s.jsx)(ve,{})]})};c.a.render(Object(s.jsx)(ye,{}),document.getElementById("root"))},43:function(e,t,n){e.exports={main:"FullMenu_main__35fB5",left:"FullMenu_left__14SrU",right:"FullMenu_right__3I7wI",status:"FullMenu_status__2lgvt"}},44:function(e,t,n){e.exports={main:"MiniMenu_main__3qiRu",left:"MiniMenu_left__266y_",right:"MiniMenu_right__3IoXj",status:"MiniMenu_status__3m757",icons:"MiniMenu_icons__3SMSW"}},50:function(e,t,n){"use strict";n.r(t),n.d(t,"levels",(function(){return s})),n.d(t,"levelsAll",(function(){return a}));var s=["warn","error","status"],a=["view all","warn","error","status"]},54:function(e,t,n){e.exports={message:"Message_message__3G9Nt"}},58:function(e,t,n){e.exports={icon:"PlayPauseIcons_icon__12sU5",playIcon:"PlayPauseIcons_playIcon__24q27",pauseIcon:"PlayPauseIcons_pauseIcon__3coVw"}},63:function(e,t,n){e.exports={main:"Dialogue_main__3Ph2M",inMenu:"Dialogue_inMenu__Wn9RR"}},64:function(e,t,n){e.exports={big:"Chart_big__230Zp",small:"Chart_small__Byw_n"}},71:function(e,t,n){var s=n(99),a=n(113).v4,i=n(50).levels,l=function randomLevel(){return i[Math.floor(3*Math.random())]};e.exports={randomGenerator:function randomGenerator(){return{level:l(),message:s().sentence({words:5}),timestamp:new Date(Date.now()).toUTCString(),id:a()}}}},75:function(e,t,n){e.exports={label:"Select_label__bU6OO"}},77:function(e,t,n){e.exports={main:"Header_main__1LjXw"}},78:function(e,t,n){e.exports={main:"Messages_main__20MkE"}},79:function(e,t,n){e.exports={editMessage:"EditMessage_editMessage__1jwVY"}},98:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.5220a0a3.chunk.js.map